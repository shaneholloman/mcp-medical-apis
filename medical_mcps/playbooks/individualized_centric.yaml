playbook_id: individualized_centric
name: Individualized Discovery (Patient-Led)
description: |
  ⚠️ REQUIREMENT: This playbook REQUIRES comprehensive individual patient data including:
  - Detailed symptoms, signs, and clinical presentation
  - Complete lab values and test results
  - Imaging findings
  - Clinical history, timing, triggers, treatment responses
  - Family history and environmental exposures
  
  DO NOT use this playbook without actual individual patient data. This is a companion
  tool designed to help over weeks/months work with a patient and their clinicians to:
  (1) Document comprehensive phenotype, (2) Generate differential diagnosis,
  (3) Systematically rule out diseases, (4) Identify underlying dysfunction,
  (5) Determine diagnostic tests needed, (6) Find drugs targeting dysfunction.
  
  This playbook enables patient-led research where individuals work systematically with
  clinicians to identify underlying dysfunctions (pathway overactivation, protein misfolding,
  metabolic derangement) rather than accepting disease labels.
  
  If you do not have individual patient data, use disease-centric, pathway-centric, or target-centric
  playbooks instead.
starting_point: individual_symptoms
first_principles_framework: |
  Phenotype-to-Mechanism Discovery / Patient-Led Research:
  Disease labels are clinical phenotype descriptions, not mechanistic explanations.
  Focus on identifying the actual dysfunction (pathway overactivation, protein misfolding,
  metabolic derangement) rather than accepting disease labels.
  The cure addresses the dysfunction, not the label.
  
  This approach works iteratively over time as more diagnostic tests are run and results
  become available. It is a collaborative process between patient, AI agent, and clinicians.
steps:
  - step_id: 1_document_comprehensive_phenotype
    step_type: query
    description: |
      ⚠️ REQUIRES ACTUAL PATIENT DATA: Document ALL symptoms, signs, lab values, imaging findings,
      and clinical history from an actual individual patient. Be exhaustive - every detail matters.
      Include: symptoms, timing, triggers, response to treatments, family history, environmental exposures.
      
      This step CANNOT be completed with general disease knowledge or literature. You must have
      access to actual patient records, lab reports, imaging studies, and clinical notes.
      
      If you do not have individual patient data, STOP and use a different playbook.
    tool_suggestions: []
    criteria:
      require_comprehensive_documentation: true
      include_negative_findings: true
      require_actual_patient_data: true  # Cannot use general disease knowledge
    outputs:
      - comprehensive_phenotype
      - clinical_timeline
      - all_lab_values

  - step_id: 2_generate_differential_diagnosis
    step_type: analyze
    description: |
      Generate broad differential diagnosis based on phenotype.
      Include rare diseases, common diseases, and atypical presentations.
      Don't prematurely narrow - consider everything.
    tool_suggestions:
      - omim_search_entries
      - mydisease_search_disease
      - pubmed_search_articles
    criteria:
      include_rare_diseases: true
      consider_atypical_presentations: true
    outputs:
      - differential_diagnosis
      - disease_candidates

  - step_id: 3_systematically_rule_out_diseases
    step_type: filter
    description: |
      For each disease in differential, systematically evaluate:
      (1) Does phenotype match? (2) Are required lab findings present/absent?
      (3) Are genetic markers present/absent? (4) Does disease mechanism explain ALL symptoms?
      Rule out diseases that don't fit completely.
    tool_suggestions:
      - omim_get_entry
      - mydisease_get_disease
      - gwas_search_associations
    criteria:
      require_complete_phenotype_match: true
      rule_out_partial_matches: true
    outputs:
      - ruled_out_diseases
      - remaining_candidates
      - ruling_out_reasoning

  - step_id: 4_identify_underlying_dysfunction
    step_type: analyze
    description: |
      For remaining disease candidates, identify the ACTUAL dysfunction:
      What pathway is overactive/underactive? What protein is misfolded?
      What metabolic process is deranged? Focus on mechanism, not label.
      Example: If a disease involves excessive inflammation, identify the specific pathway
      (e.g., 'mTOR overactivation' or 'IL-6 overproduction') rather than just the disease name.
    tool_suggestions:
      - reactome_get_disease_pathways
      - kegg_get_disease
      - uniprot_get_protein
      - pathwaycommons_search
    criteria:
      focus_on_mechanism: true
      identify_specific_dysfunction: true
    outputs:
      - underlying_dysfunctions
      - pathway_dysregulations
      - molecular_mechanisms

  - step_id: 5_determine_diagnostic_tests_needed
    step_type: hypothesize
    description: |
      Determine what additional tests/evidence would confirm the dysfunction:
      Biomarkers? Genetic tests? Functional assays? Imaging?
      What would definitively prove the mechanism?
      
      This step helps guide the patient and their clinicians on which tests to run next.
      The results from these tests will inform subsequent iterations of this playbook.
      This is an iterative process that unfolds over weeks/months as test results become available.
    tool_suggestions:
      - uniprot_get_protein
      - myvariant_search_variants
      - pubmed_search_articles
    criteria:
      identify_definitive_tests: true
      prioritize_functional_assays: true
    outputs:
      - required_tests
      - diagnostic_plan
      - evidence_gaps

  - step_id: 6_find_drugs_targeting_dysfunction
    step_type: query
    description: |
      Find drugs that directly address the identified dysfunction.
      Don't search for 'disease X' drugs - search for 'mTOR inhibitors' or
      'pathway Y modulators'. The dysfunction, not the disease label, is what matters.
    tool_suggestions:
      - chembl_get_activities_by_target
      - chembl_search_molecules
      - reactome_query_pathways
      - kegg_get_pathway
    criteria:
      target_dysfunction_not_disease: true
      include_all_approved_drugs: true
    outputs:
      - dysfunction_targeting_drugs
      - drug_mechanisms
      - repurposing_candidates

  - step_id: 7_evaluate_drug_dysfunction_alignment
    step_type: analyze
    description: |
      For each drug, evaluate: Does it directly address the dysfunction?
      Is the mechanism correct (inhibitor for overactivation, activator for underactivation)?
      What is the evidence it works for this dysfunction?
    tool_suggestions:
      - chembl_get_mechanism
      - chembl_get_activities
      - pubmed_search_articles
    criteria:
      require_mechanism_alignment: true
      evaluate_direction_of_effect: true
    outputs:
      - drug_dysfunction_alignment
      - mechanism_validation

  - step_id: 8_check_safety_and_feasibility
    step_type: validate
    description: |
      Evaluate safety profile, contraindications, drug interactions, and feasibility.
      Consider: Is this drug safe for this patient? What monitoring is needed?
      What are the risks vs. benefits?
    tool_suggestions:
      - openfda_label_searcher
      - openfda_adverse_searcher
      - pubmed_search_articles
    criteria:
      evaluate_safety_profile: true
      assess_risk_benefit: true
    outputs:
      - safety_assessment
      - feasibility_analysis
      - risk_benefit

  - step_id: 9_generate_treatment_hypothesis
    step_type: hypothesize
    description: |
      Generate testable hypothesis: 'Drug X will address dysfunction Y by mechanism Z,
      leading to improvement in symptoms A, B, C.'
      This hypothesis should be mechanistic, not disease-label-based.
    tool_suggestions: []
    criteria:
      require_mechanistic_hypothesis: true
      connect_drug_to_symptoms: true
    outputs:
      - treatment_hypothesis
      - expected_outcomes
      - monitoring_plan

expected_outputs:
  - underlying_dysfunction
  - diagnostic_plan
  - dysfunction_targeting_drugs
  - treatment_hypothesis

convergence_criteria:
  require_dysfunction_identification: true
  require_mechanistic_hypothesis: true
  require_drug_dysfunction_alignment: true

